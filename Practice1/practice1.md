# Лабораторная работа №1 
* Для проекта был создан отдельный репозиторий: https://github.com/Nazgul-123/Code-evaluation-system

## Цель 
Применить асинхронное программирование к разработанной распределенной программной системе (DSS) и подключить хранилище данных.

## Задачи 

1. Подключить async-runtime к Вашей DSS. ✔️  
   
--- 

2. Подключить выбранную в П0 СУБД к Вашей DSS (InMemoryUserRepository -> MySQLUserRepository). ✔️  

--- 

3. Явно выделить слои Вашей DSS и отразить их в коде: 

   1. **Выбранный фреймворк (API endpoints, Console app, etc.)**  
      → [main.py]  
      Используется Aiogram для создания Telegram-бота.  
      Основные API endpoints реализованы в виде обработчиков сообщений (@dp.message(Command(...))).
      Входная точка приложения: async def main() запускает dp.start_polling(bot).

   2. **Application (принимает и возвращает DTO)**  
      →  [handlers в main.py]
      Функции send_welcome(), evaluate_code(), handle_code_submission() принимают сообщения от пользователей.  
      Они обрабатывают входные данные (DTO — текстовый код, отправленный студентами), передают их в доменный слой.
      Возвращают отчеты и метрики, которые бот отправляет пользователю.  

   4. **Domain (принимает Command, возвращает Event)**  
      → [domain/]  
      - domain/entity/ — содержит основные сущности:  
        - student.py – описание студента. 
        - teacher.py – описание преподавателя.
        - code.py – представление кода студента.
        - report.py – объект отчета.

      - domain/aggregate/  
        - report_generation.py – логика создания отчетов.
        Domain-слой не зависит от инфраструктуры, он управляет бизнес-логикой.

   5. **Infrastructure (реализация Repository, доступ к внешним сервисам, СУБД)**  
      → [models/, scripts/database.py]
      - models/
        - static_analyser.py – использует статический анализатор для проверки кода.
        - LLM.py – вызывает языковую модель для оценки кода.
      - scripts/database.py
        - Подключение к aiosqlite (СУБД).
      - domain/aggregate/github_service.py
        - Взаимодействие с GitHub API.

   7. **Util (логирование и т.д.)**  
      → [scripts/, config.py]
      - config.py – содержит токены, пути к БД, конфигурационные параметры.
      - scripts/database.py – вспомогательные функции для работы с БД.
      - Логирование может быть добавлено через logging в main.py и другие модули.  
      Таким образом, архитектура проекта следует принципам DSS и разделяет ответственность между слоями.

4. Обновить или написать необходимые тесты. ✔️  

5. Сформировать первичные Dockerfile и docker-compose Вашей DSS и её инфраструктуры (на основе шаблона). ✔️  

---

## Требования
1. Код должен быть покрыт автотестами (unit, integration, e2e). ✔️  
2. Обращения к внешним системам (в т.ч. СУБД) должны быть асинхронными (async). ✔️  
